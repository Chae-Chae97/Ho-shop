# ユーザー購入履歴API定義書

### 📜 概要

-   **機能:** ログインしたユーザーの過去の購入履歴を提供します。
-   **呼び出し時点:** マイページ(`/profile`)内の購入履歴セクションがレンダリングされる際に内部的にデータをロードします。
-   **主要ロジックファイル:** `src/contexts/CreditContext.jsx` (`purchaseHistory` 状態)、`src/components/PurchaseHistory.jsx` (データ表示)

---

### 📊 API 主要情報

*   **API 名称:** ユーザー購入履歴照会 (クライアント内部データ)
*   **対象ストレージ:** React Context (`CreditContext`) 内の `purchaseHistory` 状態
*   **処理概要:** `CreditContext`から`purchaseHistory`配列を直接取得して画面に表示します。

---

### ➡️ リクエスト (Request)

#### クライアント内部ロジック (PurchaseHistory.jsx コンポーネント)

ユーザー購入履歴照会は、外部からの明示的なリクエストパラメータを受け取りません。`CreditContext`から現在ログインしているユーザーの`purchaseHistory`状態を直接購読して使用します。

*   **リクエストパラメータ:** なし

---

### ⬅️ レスポンス (Response)

#### ✅ 成功レスポンス (クライアント内部処理)

*   **処理結果:** ユーザーの購入履歴を格納している配列。
*   **データ構造 (各購入履歴オブジェクト):**

| フィールド名   | タイプ     | 説明                                     | 例値                     |
| ----------- | -------- | ---------------------------------------- | --------------------------- |
| `id`        | `number` | 購入履歴固有ID (タイムスタンプ)           | `1678886400000`             |
| `date`      | `string` | 購入日時 (ローカル時間文字列)             | `2023. 3. 15. 午後 3:00:00` |
| `items`     | `Array<Object>` | 購入した商品オブジェクトの配列 (カート項目と同じ構造) | `[{ id: 1, name: '商品A', price: 1000, quantity: 1 }]` |
| `totalAmount`| `number` | 該当購入履歴の合計決済金額            | `1000`                      |

#### ❌ エラーレスポンス (クライアント内部処理)

購入履歴照会はクライアント内部の状態を読み取るものであるため、データロード自体で発生するエラーはありません。購入履歴がない場合は空の配列が返されます。

*   **エラータイプ:** 該当なし (データロード失敗なし)
*   **処理結果:** 購入履歴がない場合は空の配列 `[]` を返す。
