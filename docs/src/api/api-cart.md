# カート管理API定義書

### 📜 概要

-   **機能:** ユーザーのカートに商品を追加、削除、数量変更、およびカートを空にする機能を提供します。
-   **呼び出し時点:** 商品リスト/詳細ページで「カートに追加」ボタンクリック時、カートページで商品数量変更/削除/空にするボタンクリック時に呼び出されます。
-   **主要ロジックファイル:** `src/contexts/CartContext.jsx` (`addToCart`、`removeFromCart`、`increaseQuantity`、`decreaseQuantity`、`clearCart` 関数)

---

### 📊 API 主要情報

*   **API 名称:** カート管理 (クライアント内部状態管理)
*   **対象ストレージ:** React Context (`CartContext`) 内の `cartItems` 状態
*   **処理概要:** `cartItems` 配列を直接操作してカートの状態を更新します。

---

### ➡️ リクエスト (Request)

#### 1. 商品追加 (クライアント内部関数呼び出し: `addToCart`)

*   **説明:** カートに商品を追加します。既に存在する商品は数量のみ1増加します。

| フィールド名 | タイプ     | 説明           | 必須かどうか | 例値                                     |
| :-------- | :------- | :------------- | :-------- | :------------------------------------------ |
| `product` | `Object` | 追加する商品オブジェクト | 必須      | `{ id: 1, name: 'マッカラン 18年', price: 35000, ... }` |

#### 2. 商品削除 (クライアント内部関数呼び出し: `removeFromCart`)

*   **説明:** カートから特定の商品を完全に削除します。

| フィールド名 | タイプ     | 説明           | 必須かどうか | 例値 |
| :-------- | :------- | :------------- | :-------- | :------ |
| `id`      | `number` | 削除する商品のID | 必須      | `1`     |

#### 3. 商品数量増加 (クライアント内部関数呼び出し: `increaseQuantity`)

*   **説明:** カート内の特定商品の数量を1増加させます。

| フィールド名 | タイプ     | 説明           | 必須かどうか | 例値 |
| :-------- | :------- | :------------- | :-------- | :------ |
| `id`      | `number` | 数量を増加させる商品のID | 必須      | `1`     |

#### 4. 商品数量減少 (クライアント内部関数呼び出し: `decreaseQuantity`)

*   **説明:** カート内の特定商品の数量を1減少させます。数量が1の場合、その商品をカートから削除します。

| フィールド名 | タイプ     | 説明           | 必須かどうか | 例値 |
| :-------- | :------- | :------------- | :-------- | :------ |
| `id`      | `number` | 数量を減少させる商品のID | 必須      | `1`     |

#### 5. カートを空にする (クライアント内部関数呼び出し: `clearCart`)

*   **説明:** カートの全ての商品を削除します。
*   **リクエストパラメータ:** なし

---

### ⬅️ レスポンス (Response)

#### ✅ 成功レスポンス (クライアント内部処理)

*   **処理結果:** `CartContext` 内の `cartItems` 状態が更新されます。
*   **ユーザーフィードバック (例):**
    *   `addToCart`: `${product.name} がショッピングカートに追加されました。` (商品がカートに追加されました。)
    *   `removeFromCart`: (別途通知なし、UIで即時反映)
    *   `increaseQuantity`、`decreaseQuantity`: (別途通知なし、UIで即時反映)
    *   `clearCart`: (別途通知なし、UIで即時反映)

#### ❌ エラーレスポンス (クライアント内部処理)

カート管理はクライアント内部の状態操作であるため、明示的なエラーレスポンスはありません。誤った `id` が渡された場合、該当商品が存在しないため何も変化しません。

*   **エラータイプ:** 該当なし (データ操作失敗なし)
*   **処理結果:** 無効なリクエスト（例: 存在しない商品ID）に対しては状態変化なし.
